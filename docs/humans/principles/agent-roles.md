# Agent Roles & Responsibilities

> **Source of Truth**: AI PM과 Development Agent의 역할 분리 원칙

## 핵심 원칙

> **PM은 "무엇을, 왜" 담당. 개발 Agent는 "어떻게" 담당.**

PM이 직접 코드를 작성하거나 배포하지 않습니다.  
개발 Agent가 기획이나 우선순위 결정을 하지 않습니다.

---

## 왜 역할을 분리하는가?

### 문제: 역할 혼재

```
❌ PM이 코드까지 작성 → 품질 저하, 맥락 오버로드
❌ Dev Agent가 기획까지 → 방향성 혼란, 범위 확장
```

### 해결: 명확한 경계

```
✅ PM: 무엇을 왜 해야 하는지 정의
✅ Dev: 어떻게 구현할지 결정
✅ Human: 최종 승인
```

### 기대 효과

- **집중**: 각 Agent가 전문 영역에 집중
- **품질**: 역할별 최적화
- **책임**: 문제 발생 시 원인 추적 용이
- **확장**: 나중에 Agent 추가 시 유연함

---

## Role Definition

```
┌─────────────────────────────────────────────────────────────────┐
│                         AI PM                                    │
│                                                                  │
│  담당:                                                          │
│  ✅ 아이디어 구조화 및 문제 정의                                │
│  ✅ 기존 프로젝트와 크로스체크                                  │
│  ✅ 작업 우선순위 결정                                          │
│  ✅ 태스크 명세서 작성                                          │
│  ✅ 진행 상황 추적 및 리포팅                                    │
│  ✅ HITL 체크포인트 관리                                        │
│  ✅ 컨텍스트 관리 (현황 요약, export)                           │
│                                                                  │
│  하지 않음:                                                      │
│  ❌ 코드 작성                                                   │
│  ❌ 직접 배포                                                   │
│  ❌ 기술적 구현 결정                                            │
└─────────────────────────────────────────────────────────────────┘
                              │
                              │ Task Spec 전달
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                      Development Agent                           │
│                      (Claude Code 등)                           │
│                                                                  │
│  담당:                                                          │
│  ✅ 코드 작성 및 수정                                           │
│  ✅ 기술적 구현 방법 결정                                       │
│  ✅ 테스트 작성 및 실행                                         │
│  ✅ PR 생성                                                     │
│  ✅ 배포 요청 (HITL 승인 필요)                                  │
│  ✅ 기술적 문제 해결                                            │
│                                                                  │
│  하지 않음:                                                      │
│  ❌ 작업 우선순위 결정                                          │
│  ❌ 요구사항 범위 변경                                          │
│  ❌ 기획/설계 의사결정                                          │
└─────────────────────────────────────────────────────────────────┘
                              │
                              │ 결과 보고
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│                         Human                                    │
│                                                                  │
│  담당:                                                          │
│  ✅ 최종 의사결정                                               │
│  ✅ HITL 승인                                                   │
│  ✅ 방향 수정                                                   │
│  ✅ 피드백 제공                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## Self-Contained Issue 원칙 (중요)

> **Issue만 보고 바로 작업 가능해야 함. 외부 문서 참조 금지.**

### 왜 Self-Contained인가?

```
❌ "자세한 내용은 XX 문서 참고"
   → Dev Agent가 컨텍스트 스위칭, 추가 로드 필요
   → 작업 시작까지 시간 소요
   → 문서 간 불일치 가능성

✅ Issue 본문에 모든 정보 포함
   → Dev Agent가 즉시 작업 시작
   → 명확한 완료 기준
   → 단일 출처 (Single Source of Truth)
```

### Self-Contained Issue 요건

```markdown
## 필수 포함
1. 단 하나의 명확한 작업
2. 수정할 파일 경로
3. 구체적인 변경 내용 (코드 스니펫 포함)
4. 확인 가능한 완료 조건
5. 예상 소요 시간 (≤ 30분)

## 금지 사항
❌ "XX 문서를 참고하세요"
❌ "기존 스타일을 따라주세요"
❌ "적절히 판단해서 구현"
❌ "이전 작업을 참고해서"
```

### Issue 사이즈 제어

| 기준 | Good | Bad (분할 필요) |
|------|------|----------------|
| 예상 소요 | ≤ 30분 | > 30분 |
| 수정 파일 | 1-2개 | 5개 이상 |
| 작업 범위 | 단일 기능 | 여러 기능 |

### Parallel vs Sequential

```
Parallel (병렬): 서로 독립적 → Dev Agent가 동시 처리
Sequential (순차): 순서 의존 → 앞 작업 완료 후 시작
```

PM은 Task Group 전달 시 실행 순서를 명확히 지정해야 함.

---

## Handoff Protocol

### PM → Development Agent

**전달하는 것 (Dev-Ready Issue):**

```markdown
## 이 Issue에서 해야 할 것
{단 하나의 명확한 작업}

## 수정할 파일
| 파일 | 변경 내용 |
|------|----------|
| `src/components/Hero.tsx` | 타이틀 텍스트 변경 |

## 구체적인 변경 사항

**현재 상태:**
```tsx
<h1>Hello World</h1>
```

**변경 후:**
```tsx
<h1>Welcome to TinySolver</h1>
```

## 완료 조건
- [ ] 타이틀이 변경됨
- [ ] 빌드 성공
- [ ] Preview 확인

## 메타 정보
| 항목 | 값 |
|------|---|
| **예상 소요** | 10분 |
| **우선순위** | P3 |

## 의존성
- **선행 작업**: 없음
- **병렬 가능**: Yes
```

**전달하지 않는 것:**
- 외부 문서 링크 (Issue에 모든 정보 포함)
- 구체적인 구현 방법 (Agent가 결정)
- 사용할 라이브러리 선택 (권장만 제공)

---

### Development Agent → PM

**보고하는 것:**

```markdown
## 작업 완료 보고

### Task
[작업 제목]

### 결과
- **상태**: 완료 / 진행중 / 블로커
- **PR**: #[번호] (있으면)
- **Preview**: [URL] (있으면)

### 변경 사항
- [변경 1]
- [변경 2]

### 다음 필요한 것
- [ ] HITL 승인 (배포 전)
- [ ] 추가 요구사항 확인

### 기술적 노트
[PM이 알아야 할 기술적 사항 - 선택]
```

---

## Workflow Example

```
[Human] "랜딩 페이지에 새 섹션 추가해줘"
    │
    ▼
[AI PM] 
    1. 요청 파싱 → 프로젝트: tinysolver.me
    2. Task Spec 작성
    3. 우선순위 결정: P2
    4. HITL 체크포인트 설정
    │
    │ Task Spec 전달
    ▼
[Dev Agent - Claude Code]
    1. Task Spec 수신
    2. 코드 구현
    3. 테스트
    4. PR 생성
    │
    │ 결과 보고
    ▼
[AI PM]
    1. 결과 확인
    2. HITL 체크포인트 → Human에게 승인 요청
    │
    ▼
[Human] 
    - 승인 → 배포 진행
    - 수정 요청 → PM이 새 Task Spec 작성
```

---

## 미래 구체화 항목

> 아래 항목들은 실제 사용하면서 구체화할 예정

### 1. Task Spec 전달 방식
- [ ] 어떻게 전달할 것인가? (파일? API? 직접 호출?)
- [ ] Claude Code가 Task Spec을 어떻게 읽을 것인가?
- [ ] 자동화 가능한가?

### 2. 결과 수신 방식
- [ ] Dev Agent가 완료 후 어떻게 알릴 것인가?
- [ ] PM이 결과를 어떻게 추적할 것인가?
- [ ] GitHub PR/Issue와 연동?

### 3. 에러 핸들링
- [ ] Dev Agent가 막혔을 때 PM에게 어떻게 알릴 것인가?
- [ ] 타임아웃 처리
- [ ] 롤백 프로세스

### 4. 멀티 Agent 시나리오
- [ ] 여러 Agent가 동시에 작업할 때 조율
- [ ] 작업 의존성 관리

---

## Agent Selection Guide

| 작업 유형 | Agent | 근거 |
|----------|-------|------|
| UI/컴포넌트 변경 | Claude Code (frontend) | React/TS 전문 |
| API 개발 | Claude Code (backend) | Python/FastAPI |
| 인프라 변경 | Claude Code (infra) | Terraform/K8s |
| 문서 작성 | Claude Code (docs) | 마크다운 |
| 코드 리뷰 | Claude Code (review) | 품질 체크 |

---

## 원칙 요약

1. **PM은 "What & Why"** - 무엇을 왜 해야 하는가
2. **Dev Agent는 "How"** - 어떻게 구현할 것인가
3. **Human은 "Go/No-Go"** - 최종 승인
4. **명확한 경계** - 역할 침범하지 않음
5. **문서화** - 모든 Handoff는 기록됨


